家庭网络是通过运营商租借服务，是现在光纤接入猫上，通过PPPOE拨号获取一个网管的IP地址，
再次回顾一下IPV4的危机，以及应对方式。
	
	IPv4 最大的不足就是，地址空间太小，地址长度只有32位，地址一共只有42亿。
	在这42亿的地址中，其中单播地址只占一半，满打满算也只有20多亿。
	这20多亿个地址要供给 Internet 中所有的节点使用，够吗？肯定是不够。
	
	别说所有节点了，就算只给Internet中所有的主机都不够用，但是在我们的网络中真的只有主机消耗地址吗？
	远远不止，路由器的接口 Port,防火墙的 Port 没有IP 它能通吗？各种各样的服务器没有 IP 地址，能给 PC 提供服务吗？
	再加上我们所处的移动互联网时代，除了拿手机，平板等移动终端，咱们的有线设备也要联网，曾经一个用户所持有的节点只会消耗一个地址。
	但是现在一个用户需要消耗多个地址，那够吗？一个都不够，更别说消耗多个地址。
	所以 IPv4 被我们吐槽最多的点就是地址实在是太少了。地址太少不够分配，所以在用的时候会更加小心。避免不必要的浪费。
	
	为了避免地址浪费，我们只能做子网化 VLSM。
	VLSM 通过借位的方式，把一个主类地址段，分成多个子网，有大的有小的。
	大的子网用于大的网络，小的子网用于小的网络。
	通过 VLSM 你可以让同一个主类地址段中的不同地址，结合子网掩码，用于不同网络，并且能解决地址冲突的问题。
	
	光解决地址这一个手段，只是避免地址浪费，但是它解决不了地址不够用的问题。就算一个不浪费也不够让 Internet 中所有网络节点使用。
	
	为了解决地址不够用的问题，IETF 在 RFC1918文档中把 IPv4 地址分成了两部分：
		第一部分就是共有地址。
		第二部分就是私有地址。
		
	其中公有地址的使用规则和我们之前的使用是一样的。建议公网地址用在公网中。
	
	什么样的网络是公网呢？
	比如说运营商的网络，比如数据中心的网络，这些网络中，所有节点所处的位置就是公网。
	在公网中任何一个节点所分配的地址都是公有地址。
	并且为了保证这个地址有效，一定要保证地址的唯一性。
	也就说你在用这些ip地址前，你需要购买或者租赁。
	一旦你购买或租赁了，这些地址就专供你使用，不用担心其他人在未经授权的情况下，跟你使用相同的地址。不会的。
	
	内网，也就咱们这些企业网，政府网，医疗网，金融网，校园网，你作为运营商的客户，这些网络我们一般称为内网，或者私网。
	内网中的节点就不用花钱买地址了，你即使想买，运营商也不一定卖给你。
	所以建议直接使用私有地址，不用购买，不用租赁，也不要求全球唯一。
	你只需要做到在你这个企业园区内，使用地址的时候，各个节点使用相同的地址就行，会造成地址冲突。
	正常情况下，私有地址，可以在任何园区内，任意部署。
	比如说 10.0.0.1 这个地址你可以在园区网A中使用，同时也可以在园区网B中使用。
	之所以定义私有地址，就是希望地址能提供复用性。
	
	早期 Internet 中的一个节点对应一个全球唯一的 IPv4 地址，这是一个，一对一的映射，不支持复用的 IP。
	为了解决IPv4地址不够用的问题，以前是一个节点消耗一个地址，现在是一万个节点消耗一个地址。
	1比10000，虽然 IP 地址很少，但是也不必担心 IP 地址会被很快用尽。
	这就是为什么13年地址池已经卖光了，直到今天7年了，IPv4 依然可以使用的原因。
	网络已经翻了好几倍，IPv4 在当前这个体量中依然能够支持。
	
	IPv6 可以从根本上解决 IPv4 地址空间不足的问题，但是 IPv6 还没有普及，因此在 IPv6 广泛应用之前，必须使用一些过度技术解决这个问题。
	
	网络地址转换技术 NAT(Network Address Tarslation) 主要用于实现位于内网主机使用私有地址的时候，能让内网主机成功访问公网技术。	
	通过 NAT 技术可以将其私网地址转换为公网地址，并且多个私网用户可以共用一个公网地址。
	
	没有 NAT 和 PAT，单纯的在内网部署私有地址，单纯的在园区网的边界部署一个公有地址，这样做是不足以让内网主机成功访问公网的。
	
	为什么不能呢？
	
	PCA------R1-----R2------Server
	内网主机PCA，直接连接内网的边界路由器 R1，边界路由 R1 连接运营商的骨干路由器 R2，R2连接一台百度 Server。
	
	服务器 Server 肯定不和这台内网主机 PCA 在同一个园区。
	因为一个企业网园区，你的内网节点方便让被别人访问吗？不方便。
	所以百度，网易 服务器 不会放在公司内网；它们一般被放在运营商数据中心 IDC(Internet Data Center,因特网数据中心) 机房内，
	因特网数据中心一般是和运营商网络直接相联的。
	这些大的网络公司开发的应用放到服务器，这些应用怎样被用户访问呢？
	放在自己的公司肯定是不行的，得放到运营商的 IDC 机房里。这个行为叫做服务器托管。
	自己买服务器，自己上架，占用运营商的机柜空间，然后向运营商买带宽，服务。
	
	内网主机访问公网服务器，服务器属于IDC机房，IDC这个数据中心是属于公网的，所以这些服务器的地址都是公网地址。
	既然你们使用公有地址，我们在对这些服务器做访问的时候，你不用担心包发不过去。
	因为一个企业园区边界路由器都会有一条默认静态路由0.0.0.0/0，指向运营商，
	
	PC只要访问外网资源，Request会被内网的设备就会一跳跳转发，把 Request 包转发给边界，
	边界会通过默认路由把包发给运营商，而运营商拥有整个Internet中主要的路由条目。
	通过这些明细路由帮你转发，最终把包发给服务器，服务器收到包之后，做一些处理，让后给客户端应答 Reply。
	
	当然，这个回应就比较困难。
	因为咱们 PC 是一台内网主机，使用的是私有地址，使用私有地址的内网主机在访问公网的时候。发包去往公有服务器，包的目的IP是一个公有地址。
	由于路由器在转发数据的时候，它只关心目的地址，只关注你去往哪里，目的地址是一个公有地址，所以路由器可以帮我们一跳跳转发到目的服务器。
	
	但是，回包就不一样了。
	因为服务器收到包，它能看到这个三层地址源IP，它能够知道包是谁给它发的；服务在给你回应的时候，就会把回包流量回给你这个私有地址。
	
	但是，私有地址能保证全球唯一性吗？
	不能保证，当前全世界肯定有1w台主机在使用10.0.0.1这个私有地址，服务器回包的时候，把回包地址指向10.0.0.1，
	
	运营商的公网路由器在收到回包的时候，应该做何处理。难道要把包拷贝1w份，分别发送给这1w个园区吗？
	
	不可能效率太低了，我肯定希望给你做一个精确的回包，但是我怎么知道这个10.0.0.1是你们这1w台主机中那一台主机啊。
	就是因为我没法区分你们，所以我就干脆不想区分你们。
	因此业界就有了一个不成文的规定，任何国家，任何路由器的公网路由表中，是不允许存在私网路由条目的。
	这意味着任何一台公网路由器，只要收到一个包，这个包的目的地址是一个私有地址，那能做的事就是把这个包丢弃。
	因为查询路由表最终会以失败告终。
	
	这就是使用私有地址的内网主机访问外网的过程，你觉的这样的访问算是正常上网吗？
	使用私有地址目的是好的，为了节约地址，增加地址复用性，延续IPv4的生命力。
	当时你使用了私网地址的内网主机连正常访问公网也做不到，那么私有地址就没有存在的价值了。
	
	为了解决服务器回包，到达运营商公网路由被丢弃的问题，回包之所以内网收不到，就是因为回包的目的IP是一个私有地址，正是因为它的私有地址无法保证全球唯一性。
	所以公网路由器没有办法给你做转发回应。
	换句话说，只要能保证这个回包的目的 IP 地址是一个公有 IP 地址，就能解决这个问题。
	但是问题又来了，你怎样让一个回包的目的 IP 变成一个公有地址呢？
	
	PC 配置的地址明明是一个私有地址啊，你在访问服务器的时候，按照的IP的逻辑，应该保证端到端3层IP地址的一致性。
	所谓的端到端3层地址的一致性是什么意思呢？
	任何一个主机产生一股流量，访问任何一个目的地。这个流量不管怎么走，不管在网络的哪一个位置，它的源目3层地址都不应该发生改变。
	源都是通信者主机，目的地都是接受者服务器。
	你想要回包的目的地址，是一个公有地址，你必须要打破这个规则。
	谁来打破呢，一般就用这个企业园区的边界路由器来打破，使用的手段就是NAT/PAT。
	
NAT应用场景

	|--------------|											|
	|主机A		   |							私有网络		|	公共网络
	|192.168.1.1/24|--------|									|
	|--------------|		|       |----------|			|---|-|
							|	    |	SWA	   |			|  	| |200.10.10.0/24	|			|
							|-------|--------->|------------|RTA| |-----------------| Internet	|
							|		|<---------|			|---|-|					|			|
	|--------------|		|		|--------->|				|
	|主机A		   |--------|									|
	|192.168.1.1/24|											|
	|--------------|											|
	
	.企业或者家庭所使用的网络为私有网络，使用的是私有地址；运营商维护的网络为公共网络，使用的是公有地址。私有地址不能在公网路由中。
	.NAT 一般部署在连接内网和外网的网关设备上。
	
	
NAT和PAT的基本工作原理介绍。

	在企业园区网的边界路由器上做一个NAT，由于边界路由器即连接私网，又连接公网，总会有一些接口拥有公有地址。
	当然除了这个外网接口拥有公有地址以外，还能备至一些公有地址，来给内网这些主机做地址转换。
	内网的 PC 在访问公网服务器的时候，这个包通过内网边界出去，当包到达内网边界路由器，边界路由器在帮你把包发给外网之前，会给你执行地址转换。
	地址转换会强行的把你所发送的三层报头的源 IP 地址，从原来的私有地址，转换成一个公有地址，然后把转换好的数据，通过外网接口发走。
	
	对于服务器而言，它是不会知道这件事的。
	服务器收到包，它会以为访问它的这个节点就是一个使用公网地址的主机。
	并且服务器，收到的数据，在给你做回应的时候，回应的数据目的IP，就是你转换后的公有地址。
	
	回包到达运营商路由器，路由器一看是一个目的地是公网地址，能够保证全球唯一，然后查表转发。
	
	边界路由器做了 NAT 和 PAT 以后会在路由器本地产生一张 NAT 地址转换表，表中清晰的记录着，把那个私有地址转换成那个公有地址，
	转换前的私有地址叫做 inside loacl，转换后的公有地址称为 inside global。
	边界路由器收到一个由外到内的回包的时候，收到一个包不会直接拿目的 IP 查路由表。
	先会根据IP查询NAT的地址转换表，这个目的IP是不是某个inside global地址，是否需要回向转换，
	如果没有匹配到任何一个 inside global 地址，代表这不是一个转换后的地址。
	如果是一个 inside global 地址，做一个回向转换后，把回包的目的IP，从 inside global 还原成一个inside local地址。
	然后，再把包发给内网。这个行为对于PC来说也是不可见的。PC会以为使用私有地址，可以成功访问服务器。
	这就是NTA和PAT解决的，一个使用私有地址的内网主机成功访问公网的连通性的问题。
	
静态NAT
	
							[S:192.168.1.1][D:100.1.1.1]----------->[S:200.10.10.1][D:100.1.1.1]
							[D:192.168.1.1][S:100.1.1.1]<-----------[D:200.10.10.1][S:100.1.1.1]
	|--------------|											|
	|主机A		   |							私有网络		|	公共网络
	|192.168.1.1/24|--------|									|
	|--------------|		|       |----------|			|---|-|
							|	    |	SWA	   |			|  	| |200.10.10.0/24	| 主机C		|
							|-------|--------->|------------|RTA| |-----------------| Internet	|
							|		|<---------|			|---|-|					|			|
	|--------------|		|		|--------->|				|					 100.1.1.1/24
	|主机B		   |--------|									|
	|192.168.1.2/24|											|
	|--------------|	

	.静态NAT 实现了私有地址和公有地址的一对一映射。
	.一个公有 IP 只会分配给唯一且固定的内网主机。

动态NAT
							[S:192.168.1.1][D:100.1.1.1]----------->[S:200.10.10.1][D:100.1.1.1]
							[D:192.168.1.2][S:100.1.1.1]----------->[D:200.10.10.2][S:100.1.1.1]
	|--------------|											|
	|主机A		   |							私有网络		|	公共网络
	|192.168.1.1/24|--------|									|
	|--------------|		|       |----------|			|---|-|
							|	    |	SWA	   |			|  	| |200.10.10.0/24	| 主机C		|
							|-------|--------->|------------|RTA| |-----------------| Internet	|
							|		|<---------|			|---|-|					|			|
	|--------------|		|		|--------->|				|地址池				 100.1.1.1/24
	|主机B		   |--------|								|--------------|
	|192.168.1.2/24|										|200.10.10.0/24| 请注意,公有地址不能是边界路由器外网出口的地址，
	|--------------|										|--------------|
															|200.10.10.1   |	
															|200.10.10.2   |
															|.......	   |
	.动态NAT 基于地址池来实现私有地址和公有地址的转换		|--------------|
																	
	
	
	NAT和PAT是一把双刃剑，帮你解决了私有地址内网主机访问公网联通性的问题的同时，又造成了一个新的问题，打破了 3 层报头 IPv4 端到端的一致性规则。
	2层报头的 MAC 地址是每跨越一台路由器，是都会发生改变的。
	
	一台路由器收到一个以太网帧，都要先去掉帧头帧尾，查看三层报头目的 IP 地址，查路由表确定转发接口。
	确定转发接口以后，在通过转发接口把包发出去之前，你会重新的给包添加2层的帧头和帧尾，然后再发走。
	原目2层MAC地址每跨越一台路由设备都会发生改变，但是3层IP地址是不应该发生改变的。
	
	而做了 NAT 之后3层IP一致性被打破，这样做会影响通信的对等性。
	原本的通信应该是对称对等的。所谓对称，就是我能访问你，你也能访问我，如果大家使用公网地址正常情况应该是这样的。
	没有做ACL访问策略的时候，内网主机能主动访问公网服务器，公网服务器也能主动访问内网主机；
	这是大家都使用公有地址的情况下，在遵循端到端3层IP地址一致性的规则下来。
	
	以上是我们网络的一个正常表现。
	但是你做了ANT/PAT之后，你就做不到这一点了，访问就不再对称，不再对称具体行为是什么样的呢？
	内网主机可以访问公网服务器，公网服务器的回包也能回的进来，但是想让公网服务器来主动访问内网主机，这个访问就进不来了。
	
	在 Internet 因特网环境中，有两个园区，他们都办理了电信的企业宽带，两个企业园区的边界路由器都通过一根线连接到运营商。
	从网络连接层面来看，这两个企业园区之间应该是通的，但是，由于两个企业园区内部都使用的私有地址，两个园区的边界都做了NAT和PAT。
	想要这两个网络的内网主机之间，直接通过运营商网络来做互访，这个是天方夜谭，做不到。
	
	两家园区网使用私有地址的主机，只能实现去往一家IDC服务器的访问。
	
	服务器的回包也能回的来，但是服务器能主动访问内网客户机吗？
	不能，两个企业网的内网主机之间也不能相互访问。
	
	所以要解决企业网之间内网联通性的问题，就得需要一些工具。比如向运营商办理专线，办理各种各样的VPN。
	VPN有两类：
		一类叫P2P VPN
		一类叫overly VPN 包括 GRE DMVPN IPsec，sslvpn，ppptop 都算。
	
	做了PAT之后最大的问题就是从外到内无法访问。
	边界路由器会拿一个公网地址给一个内网主机做地址转换，那个内网的主机被转换成了那个公网地址，公网的设备是不可能知道的。
	甚至连咱们边界路由器自己都可能不知道。
	在边界路由器上很有可能会部署一个边界转换的公网地址池，池中放了 N 多个连续的公网地址。
	当一个内网主机，从内网访问外网的时候，边界路由器可能是随机的从地址池中取出一个公网地址为来转换映射。
	并且这个映射表项只会维持一段时间，访问完毕之后过一段时间会消失。

	注意，NAT不是所有的网络设备都能使用的。交换机就不行，能使用 NAT 的是路由器和防火墙。
	这就是为什么设计园区网架构的时候，要把 路由器 和 防火墙 做边界。
	
	当前连接运营商的企业宽带，一般都是使用 Enternet 线缆来连接，以太网线缆支持带宽高，传输距离远。
	以太网连接完运营商创建一个 daw 口，通过PPPOE拨号，来实现咱们这个的最终联通性。
	以太网接口什么机器上都有，交换机，路由器，防火墙都支持，这个时候边界选着更加多样化。
	
	但最终为嘛使用防火墙呢，因为当前咱们内网的价值越来越高了，组一个网，提供一个联通性就好了，而现在内网提供的内容越来越丰富，它的价值越来越高。
	有些非法分子就会想要切取你的价值。为了避免这些非法的未经授权的黑客，对你这个关键资源的非法访问。
	为了保证安全性，一般通过在边界设置一个防火墙来保障内网资源的安全性。
	
	路由器一般不会再做边界了，一般会放在企业的DMZ非军事化区域，
	在这个区域内除了放置 路由器 以外，还会放置一系列的 服务器 Server，web服务器，smtp服务器，等对外主动提供访问。
	
	DMZ中的路由器作用是什么呢？
	主要是承接从外到内的 LAN To LAN VPN 连接，因为针对 LAN To LAN 这种overlay VPN，路由器的性能要比防火墙好的多，特性也比防火墙支持的多。
	防火墙对于IPsec，更多是支持easyVPN，
	
	NAT作为第一代的地址转换协议，只支持1个公有地址转换一个私有地址。
	很简单在边界上准备一个地址池，地址池中放未使用的公有地址，专门来做地址转换。
	边界拿地址池中一个公有地址，给一个内网主机做一个私有地址替换的时候，它会记录地址转换表项，
	它会记录咱们的那个 inside global 替换了那个 inside local地址。
	在这个表项消失之前，如果内网又有一台主机，发包要访问公网，这个时候边界收到这个包后，就没有办法使用已经存在地址换表中的公有地址，来给新的私有地址做转换了。
	想拿一个公有地址给一个私有地址转换，得先看一下NAT地址转换表中，是否有私网地址到公网地址的映射，如果没有映射存在，就可以拿这个公有地址给你转。
	如果有映射存在，就不能同时拿这个公有地址给一个私有地址转换。简单来说 NAT 就是一个1对1的映射，1个公有地址映射1个私有地址。
	表项的存活时间3到5分钟。
	
	换句话说，在一个企业内使用了NAT，想要保证内网多台主机，同时对外网发起访问。
	为了实现这一点，需要在边界服务器上部署一个相对较大的NAT地址转换池。放置 N 多个公有地址。
	地址池公有地址越多，内网到公网访问的并发数就越高。这个代价太大了，因为这些公有地址得花钱买或者租赁，对于地址的节约也不是很好。
	因为 NAT 不能达到从内到外的高并发性所以现在被淘汰。
	为了解决从内到外的高并发性，并且为了更节省地址，就要使用PAT

PAT/NAPT：Port Address Translation 端口地址转换协议 2.0

							[S:192.168.1.1:1025][D:100.1.1.1:80]----------->[S:200.10.10.1:2843][D:100.1.1.1:80]
							[D:192.168.1.2:1028][S:100.1.1.1:80]----------->[D:200.10.10.2:2844][S:100.1.1.1:80]
	|--------------|											|
	|主机A		   |							私有网络		|	公共网络
	|192.168.1.1/24|--------|									|
	|--------------|		|       |----------|			|---|-|
							|	    |	SWA	   |			|  	| |200.10.10.0/24	| 主机C		|
							|-------|--------->|------------|RTA| |-----------------| Internet	|
							|		|<---------|			|---|-|					|			|
	|--------------|		|		|--------->|				|地址池				 100.1.1.1/24
	|主机B		   |--------|								|----------------|
	|192.168.1.2/24|										|200.10.10.0/24	 | 请注意,公有地址不能是边界路由器外网出口的地址，
	|--------------|										|----------------|
															|200.10.10.1:2843|	
															|200.10.10.2:2844|
															|.......	     |
															|----------------|
															
	.网络地址端口转换动NAPT 允许多个内网地址映射到同一个公有地址的不同端口。
	
	它能够实现一对多的地址转换，你可以在做PAT的时候只在边界路由器地址池中准备一个备用公有地址。
	
Easy IP

							[S:192.168.1.1:1025][D:100.1.1.1:80]----------->[S:200.10.10.10:2843][D:100.1.1.1:80]
							[D:192.168.1.2:1028][S:100.1.1.1:80]----------->[D:200.10.10.10:2844][S:100.1.1.1:80]
	|--------------|											|
	|主机A		   |							私有网络		|	公共网络
	|192.168.1.1/24|--------|									|
	|--------------|		|       |----------|			|---|-|
							|	    |	SWA	   |			|  	| |200.10.10.10/24	| 主机C		|
							|-------|--------->|------------|RTA| |-----------------| Internet	|
							|		|<---------|			|---|-|s1/0/0			|			|
	|--------------|		|		|--------->|				|					 100.1.1.1/24
	|主机B		   |--------|									|
	|192.168.1.2/24|											|
	|--------------|	
	
	.Easy IP 允许将多个内网地址映射到网关出口地址上的不同端口

	Easy IP也是 PAT 的变种，华为的 Easy IP 不用使用地址池的备用地址，可以直接使用边界路由器外网接口的公网地址，来给私网主机做地址转换。
	可以拿这个公网地址可以给任意多的私有地址进行转换。在你的PAT的地址转换表里面你可以拿这个公有地址同时映射多个私有地址。一个地址就能解决咱们的高并发性。
	这个时候有个问题，一对一转换，正向反向转换都很轻松，但是现在做了PAT之后是多对一的转换，多对一做一个映射，再做回向映射的时候，方便做回向映射吗？
	
	举个例子：
	
	内网的两台主机10.0.0.1和10.0.0.2， 两个主机都映射到了11.0.0.1,
	边界路由器收到一个回包，从外到内，从外网接口进来一看，目的地址 11.0.0.1，
	这个时候路由器只能知道这是一个转换后的地址，但是这个地址是由那个私有地址转换的呢？
	到底是转换回10.0.0.1，还是10.0.0.2，还是同时转换他们两个一人发一份呢。
	
	从精确转换的角度看，以上都不行，那么边界怎样精确识别流量呢？
	这样表中只记录转换前的IP地址和转换后的IP地址是不够的，要多记录一些信息，
	还要记录这股流量的目的IP地址，当然目的IP地址不用转换直接记录就行。
	这样就解决了不同主机访问不同服务器，无法识别回包的问题。
	
	但是不同主机访问同一台服务器，又该怎么解决？
	除了要记录目的 IP 地址，还要记录 源端口 Sport，目的端口 Dport，通过原目端口来识别不同主机，我还就真不信这个邪了，
	为还真不相信，你们两台主机同时访问百度，源端口还是一样。
	10.0.0.1 11.0.0.1 DIP DIP Sport Dport
	10.0.0.2 11.0.0.1 DIP DIP Sport Dport
	
	内网主机访问外网web服务器， 使用Http，Http流量的目的端口是80，
	但是，主机的源端口都是随机端口；这次访问百度 Sport 可能是2000，下次可能就是 3000.
	Sport 标识的是你的浏览器，标识浏览器的源端口是谁分配的啊，是咱们的操作系统分配的，所以你每次开启浏览器分配的源端口都不一样。
	
	所以说咱们做 PAT 的路由器，由于记录信息更多，你收到从内到外的流量，我会给你记录完完整整的转换前的原目 IP 地址和转换前的原目端口。
	再记录转换后的原目IP地址和端口。
	
	回包的时候我不光看你目标IP和源IP，还要看你的原端口。通过这些信息我就能轻松识别出这股流量是发给内网那台主机的。
	这样能实现复用，并发的同时，也能轻松区分不同的回包流量，让回包能正确的回到正确的发送者主机，
	
	万一我们出了幺蛾子，如果访问同一台服务器，PAT表中两台主机源端口如果一样，PAT就会对源端口做二次转换，让你们强行不一样。
	回包的时候先帮你把IP地址回转，再帮你把端口号回转。
	这两股流量正真的区分开来，内网主机就可以收到针对他们的去包的回包数据。
	思科一般只会转IP，华为IP，端口都会转。
	
	当你做了 PAT 之后，就算边界设备使用的是思科设备，也不能实现从外到内的主动访问，
	对于通信的不对等而言，ANT 还稍微好一些，可以保证一个时间节点，从外到内可以访问。
	但是当做了PAT之后，从外到内的访问就可以忽略了。这基本是不可能实现的。除非从外到内的5元组匹配改为3元组。
	
	
	什么地方叫私网：任何一个企业，都有一个园区，最标准的部署是一个三层架构，核心层--->汇聚层--->接入层。所有在这个环境的设备都属于私网。
	一个企业都会有一个边界，早期拿路由器来做，现在都是防火墙，路由器防火墙以内的设备都叫私网。路由器防火墙连接运营商外网的这个接口，以外的网络就是公网。
	
	再两个园区之间配置了IPsec VPN，同时又配置了PAT，注意PAT的优先级是要高于 VPN 的，这会导致两个园区直接的 VPN 不通。
	为了让VPN通，得要ACL+PAT放过走 VPN 的流量。
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
